<div>
  <div class="timer-container">
    <h2><mat-icon>hourglass_empty</mat-icon> Timer</h2>
  </div>
  <p class="elapsed-time">{{ getFormattedTime() }}</p>
  
  <div class="button-group">
    <button class="btn" (click)="startTimer()" [disabled]="isRunning || isSaving">
      <mat-icon>play_arrow</mat-icon>Start
    </button>
    <button class="stop-btn" (click)="stopTimer()" [disabled]="!isRunning || isSaving">
      <mat-icon>pause</mat-icon>Stop
    </button>
    <button class="reset-btn" (click)="resetTimer()" [disabled]="isRunning || isSaving">
      <mat-icon>refresh</mat-icon>Reset
    </button>
    <button class="save-btn" (click)="openSaveDialog()" [disabled]="elapsedTime === 0 || isSaving || isRunning">
      <mat-icon>save</mat-icon>{{ isSaving ? 'Saving...' : 'Save' }}
    </button>
  </div>

  <div class="circular-progress" [class.active]="startTime !== null">
    <div class="background-circle"></div>
    <div class="circle" [style.strokeDashoffset]="440 - (progress / 100) * 440"></div>
  </div>
  <app-hourglass [duration]="duration" [isRunning]="isRunning"></app-hourglass>
</div>
